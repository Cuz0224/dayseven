{"ast":null,"code":"// import React,{Component} from \"react\";\n// import {connect} from \"react-redux\";\n// import {Link} from \"react-router-dom\";\n// import axios from \"axios\";\n// import {List, Avatar, Tag, Col, Pagination} from \"antd\";\n// const tabSchema = {\n//     all: '全部',\n//     good: '精华',\n//     share: '分享',\n//     ask: '问答',\n//     job: '招聘',\n//     dev: '测试',\n// };\n// class IndexList extends Component{\n//     constructor(arg){\n//         super(arg);\n//         let path = this.props.location.pathname.split(\"/\");\n//         this.state = {\n//             loading: this.props.loading,\n//             data: this.props.data,\n//             page: 1,\n//             tab: path[path.length-1]\n//         }\n//     }\n//     componentDidMount(){\n//         const {tab,page} = this.state;\n//         this.updata(tab,page);\n//     }\n//     componentWillReceiveProps(nextProps){\n//         let path = nextProps.location.pathname.split(\"/\");\n//         let tab = path[path.length-1];\n//         if(tab !== this.state.tab){\n//             this.setState({\n//                 tab,\n//                 page: 1\n//             });\n//             this.updata(tab,1);\n//             return false;\n//         }\n//         this.setState({\n//             loading: nextProps.loading,\n//             data: nextProps.data\n//         });\n//     }\n//     updata(tab,page){\n//         this.props.dispatch(function(dispatch,getState){\n//             dispatch({\n//                 type: \"TOPLIST_UPDATA\"\n//             });\n//             axios.get('https://cnodejs.org/api/v1/topics?tab='+tab+'&limit=20&page='+page)\n//                 .then(function(res){\n//                     dispatch({\n//                         type: \"TOPLIST_SUCC\",\n//                         data: res\n//                     });\n//                 })\n//                 .catch(function(res){\n//                     dispatch({\n//                         type: \"TOPLIST_ERROR\"\n//                     });\n//                 })\n//         });\n//     }\n//     render(){\n//         const {loading,data} = this.state;\n//         console.log(this.props);\n//         return (<Col md={18} xs={24} className=\"indexList\">\n//                 <List\n//                 loading={loading}\n//                 dataSource = {data.data}\n//                 renderItem={(item)=>{\n//                     return (\n//                         <List.Item actions={[<span style={{marginLeft: \"35px\"}}>回复{item.reply_count}</span>, <span>访问:{item.visit_count}</span>]} key={item.id}>\n//                         <List.Item.Meta\n//                             style={{minWidth:\"200px\"}}\n//                             avatar={<Avatar src={item.author.avatar_url} />}\n//                             title={(<div>\n//                                 <Tag\n//                                     color={\n//                                         item.top ?\n//                                             'magenta' :\n//                                             item.good ?\n//                                                 'green' :\n//                                                 'geekblue'\n//                                     }\n//                                 >\n//                                     { item.top ? '置顶' : item.good ? '精华' : tabSchema[item.tab] ? tabSchema[item.tab] : '分享' }\n//                                 </Tag>\n//                                 <Link to={\"/details/\"+item.id}>{item.title}</Link>\n//                             </div>)}\n//                             description={<span><Link to={\"/user/\"+item.author.loginname}>{item.author.loginname}</Link>发表于:{item.create_at.split(\"T\")[0]}</span>}\n//                         />\n//                     </List.Item>)\n//                 }}\n//             >\n//             </List>\n//             {(!loading&&data.data.length>0)?<Pagination showQuickJumper defaultCurrent={this.state.page} total={500} onChange={(page)=>{\n//                 this.setState({\n//                     page\n//                 });\n//                 this.updata(this.state.tab,page);\n//             }} />:\"\"}\n//         </Col>);\n//     }\n// }\n// export default connect((state)=>(state.topList))(IndexList);","map":{"version":3,"sources":["/Users/cuzchen/Documents/cnode03/src/pages/index/list.jsx"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["// import React,{Component} from \"react\";\n// import {connect} from \"react-redux\";\n// import {Link} from \"react-router-dom\";\n// import axios from \"axios\";\n// import {List, Avatar, Tag, Col, Pagination} from \"antd\";\n// const tabSchema = {\n//     all: '全部',\n//     good: '精华',\n//     share: '分享',\n//     ask: '问答',\n//     job: '招聘',\n//     dev: '测试',\n// };\n// class IndexList extends Component{\n//     constructor(arg){\n//         super(arg);\n//         let path = this.props.location.pathname.split(\"/\");\n//         this.state = {\n//             loading: this.props.loading,\n//             data: this.props.data,\n//             page: 1,\n//             tab: path[path.length-1]\n//         }\n//     }\n//     componentDidMount(){\n//         const {tab,page} = this.state;\n//         this.updata(tab,page);\n//     }\n//     componentWillReceiveProps(nextProps){\n//         let path = nextProps.location.pathname.split(\"/\");\n//         let tab = path[path.length-1];\n//         if(tab !== this.state.tab){\n//             this.setState({\n//                 tab,\n//                 page: 1\n//             });\n//             this.updata(tab,1);\n//             return false;\n//         }\n//         this.setState({\n//             loading: nextProps.loading,\n//             data: nextProps.data\n//         });\n//     }\n//     updata(tab,page){\n//         this.props.dispatch(function(dispatch,getState){\n//             dispatch({\n//                 type: \"TOPLIST_UPDATA\"\n//             });\n//             axios.get('https://cnodejs.org/api/v1/topics?tab='+tab+'&limit=20&page='+page)\n//                 .then(function(res){\n//                     dispatch({\n//                         type: \"TOPLIST_SUCC\",\n//                         data: res\n//                     });\n//                 })\n//                 .catch(function(res){\n//                     dispatch({\n//                         type: \"TOPLIST_ERROR\"\n//                     });\n//                 })\n//         });\n//     }\n//     render(){\n//         const {loading,data} = this.state;\n//         console.log(this.props);\n//         return (<Col md={18} xs={24} className=\"indexList\">\n//                 <List\n//                 loading={loading}\n//                 dataSource = {data.data}\n//                 renderItem={(item)=>{\n//                     return (\n//                         <List.Item actions={[<span style={{marginLeft: \"35px\"}}>回复{item.reply_count}</span>, <span>访问:{item.visit_count}</span>]} key={item.id}>\n//                         <List.Item.Meta\n//                             style={{minWidth:\"200px\"}}\n//                             avatar={<Avatar src={item.author.avatar_url} />}\n//                             title={(<div>\n//                                 <Tag\n//                                     color={\n//                                         item.top ?\n//                                             'magenta' :\n//                                             item.good ?\n//                                                 'green' :\n//                                                 'geekblue'\n//                                     }\n//                                 >\n//                                     { item.top ? '置顶' : item.good ? '精华' : tabSchema[item.tab] ? tabSchema[item.tab] : '分享' }\n//                                 </Tag>\n//                                 <Link to={\"/details/\"+item.id}>{item.title}</Link>\n//                             </div>)}\n//                             description={<span><Link to={\"/user/\"+item.author.loginname}>{item.author.loginname}</Link>发表于:{item.create_at.split(\"T\")[0]}</span>}\n//                         />\n//                     </List.Item>)\n//                 }}\n//             >\n//             </List>\n//             {(!loading&&data.data.length>0)?<Pagination showQuickJumper defaultCurrent={this.state.page} total={500} onChange={(page)=>{\n//                 this.setState({\n//                     page\n//                 });\n//                 this.updata(this.state.tab,page);\n//             }} />:\"\"}\n//         </Col>);\n//     }\n// }\n// export default connect((state)=>(state.topList))(IndexList);"]},"metadata":{},"sourceType":"module"}